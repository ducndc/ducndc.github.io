---
layout: post
title: "Scanning Network Lab Guide"
date: 2025-11-16 10:00:00 +0700
categories: [Hacking]
---

## 1. Overview

**Network Scanning** lÃ  giai Ä‘oáº¡n quan trá»ng trong pentest, náº±m giá»¯a **Reconnaissance** vÃ  **Enumeration**.  
Má»¥c tiÃªu cá»§a scanning lÃ  xÃ¡c Ä‘á»‹nh:
- Host Ä‘ang hoáº¡t Ä‘á»™ng
- Cá»•ng má»Ÿ
- Dá»‹ch vá»¥ vÃ  phiÃªn báº£n
- Há»‡ Ä‘iá»u hÃ nh má»¥c tiÃªu

---

## 2. Lab Objectives

Sau khi hoÃ n thÃ nh lab, báº¡n sáº½ cÃ³ thá»ƒ:
- Thá»±c hiá»‡n host discovery
- XÃ¡c Ä‘á»‹nh OS vÃ  service version
- PhÃ¢n tÃ­ch packet khi scan
- Sá»­ dá»¥ng Nmap Script Engine (NSE)
- PhÃ¡t hiá»‡n lá»— há»•ng phá»• biáº¿n

---

## 3. Lab Environment

| ThÃ nh pháº§n | MÃ´ táº£ |
|----------|------|
| Attacker | Kali Linux |
| Target | Windows / Linux VM |
| Network | NAT / Host-only |

---

## 4. Host Discovery Techniques

![Host Discovery](/assets/img/networking/scanning.png)

Host discovery dÃ¹ng Ä‘á»ƒ xÃ¡c Ä‘á»‹nh cÃ¡c mÃ¡y **Ä‘ang hoáº¡t Ä‘á»™ng (live hosts)** trong máº¡ng.

### 4.1 Ping Scan

```bash
nmap -sn <target-network>
```

ğŸ“Œ XÃ¡c Ä‘á»‹nh host cÃ²n sá»‘ng mÃ  khÃ´ng scan port.

---

### 4.2 OS Detection (SMB)

![Ping Discovery](/assets/img/networking/discoveryPing.png)

```bash
nmap -sV --script smb-os-discovery.nse <target-ip>
```

Thu tháº­p thÃ´ng tin OS thÃ´ng qua SMB (port 445).

---

## 5. Service & Version Detection

```bash
nmap -sV <target-ip>
```

ğŸ“Œ XÃ¡c Ä‘á»‹nh:
- Service name
- PhiÃªn báº£n
- Banner thÃ´ng tin

---

### 5.1 Packet Trace

```bash
nmap -sT --packet-trace <target-ip>
```

DÃ¹ng Ä‘á»ƒ:
- Quan sÃ¡t packet gá»­i / nháº­n
- PhÃ¢n tÃ­ch hÃ nh vi scan
- Hiá»ƒu cÆ¡ cháº¿ TCP handshake

![OS Discovery](/assets/img/networking/os_discovery.png)

---

## 6. Port Scanning

### 6.1 KhÃ¡i niá»‡m

![Port Scanning](/assets/img/networking/portScanning.png)

Port scanning Ä‘Æ°á»£c phÃ¢n loáº¡i theo **protocol**:
- TCP
- UDP

VÃ­ dá»¥ scan toÃ n bá»™ port TCP:

```bash
nmap -p- <target-ip>
```

---

## 7. Nmap Script Engine (NSE)

NSE cho phÃ©p:
- Vulnerability scanning
- Brute-force
- DoS testing
- Service enumeration

ğŸ“‚ Script location (Kali):
```bash
/usr/share/nmap/scripts/
```

---

### 7.1 Vulnerability Scan

```bash
nmap -sV -p445 --script vuln <target-ip>
```

---

### 7.2 EternalBlue Detection (MS17-010)

```bash
nmap --script smb-vuln-ms17-010 -p445 <target-ip>
```

![MS17-010](/assets/img/networking/ms17_010.png)

---

## 8. Advanced Scanning Example

```bash
nmap -sV -O -sC -v -oN nmap-win7.txt -p- <target-ip>
```

ğŸ“Œ Giáº£i thÃ­ch:
- `-sV` : service version
- `-O` : OS detection
- `-sC` : default scripts
- `-v` : verbose
- `-oN` : output file
- `-p-` : scan táº¥t cáº£ port

---

## 9. DoS Testing with Nmap (Lab Only)

âš ï¸ **Chá»‰ dÃ¹ng trong lab / mÃ´i trÆ°á»ng cho phÃ©p**

### 9.1 HTTP Slowloris

```bash
nmap -Pn --script http-slowloris --max-parallelism 800 <target-ip>
```

ğŸ“Œ Kiá»ƒm tra kháº£ nÄƒng chá»‘ng DoS cá»§a Apache server.

---

## 10. Lab Questions

1. Scanning khÃ¡c Reconnaissance á»Ÿ Ä‘iá»ƒm nÃ o?
2. Khi nÃ o nÃªn dÃ¹ng `-Pn`?
3. NSE script nguy hiá»ƒm á»Ÿ Ä‘iá»ƒm nÃ o?
4. VÃ¬ sao khÃ´ng scan DoS trÃªn há»‡ thá»‘ng tháº­t?

---

## 11. Conclusion

Network Scanning giÃºp:
- Má»Ÿ rá»™ng attack surface
- XÃ¡c Ä‘á»‹nh má»¥c tiÃªu khai thÃ¡c
- Chuáº©n bá»‹ dá»¯ liá»‡u cho Enumeration & Exploitation

Scanning hiá»‡u quáº£ giÃºp tiáº¿t kiá»‡m thá»i gian vÃ  giáº£m rá»§i ro bá»‹ phÃ¡t hiá»‡n.